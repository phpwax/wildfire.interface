<?
  //support for session-based messages to pass along between redirects
  foreach($session->get("user_errors") as $error) $messages[] = array("message"=>$error, "class"=>"error");
  $session->unset_var("user_errors");
  foreach($session->get("user_messages") as $message) $messages[] = $message;
  $session->unset_var("user_messages");
  foreach($session->get("messages") as $message) $messages[] = $message;
  $session->unset_var("messages");
?>
<ul class="messages">
  <?foreach((array)$messages as $message):?>
    <?if(is_array($message)){
      $class = $message['class'];
      $message = $message['message'];
    }else $class = false?>
    <li class="clearfix <?=$class?>"><a class="close_button" href="#"></a><span class="icon"></span><span class="message"><?=$message?></span></li>
  <?endforeach?>
</ul>